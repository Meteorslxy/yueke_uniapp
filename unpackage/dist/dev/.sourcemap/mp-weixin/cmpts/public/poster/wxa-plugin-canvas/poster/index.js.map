{"version":3,"sources":["webpack:///C:/Users/liuxingyu/Desktop/TurboTrainning-main/TurboTrainning-main_uni/cmpts/public/poster/wxa-plugin-canvas/poster/index.vue?223d","webpack:///C:/Users/liuxingyu/Desktop/TurboTrainning-main/TurboTrainning-main_uni/cmpts/public/poster/wxa-plugin-canvas/poster/index.vue?4338","webpack:///C:/Users/liuxingyu/Desktop/TurboTrainning-main/TurboTrainning-main_uni/cmpts/public/poster/wxa-plugin-canvas/poster/index.vue?f71e","webpack:///C:/Users/liuxingyu/Desktop/TurboTrainning-main/TurboTrainning-main_uni/cmpts/public/poster/wxa-plugin-canvas/poster/index.vue?f443","uni-app:///cmpts/public/poster/wxa-plugin-canvas/poster/index.vue"],"names":["components","weCanvas","data","props","config","type","default","preload","hideLoading","mounted","methods","ready","poster","downloadResource","then","catch","trigger","once","resolve","onCreate","uni","mask","title","icon","console","detail","onCreateSuccess","onCreateFail","created"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;;;AAGpD;AACgM;AAChM,gBAAgB,yMAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAsuB,CAAgB,2vBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;gBCW1vB;EACAA;IACAC;EACA;EACAC;IACA;EACA;EACAC;IACAC;MACAC;MACAC;QAAA;MAAA;IACA;IACAC;MACA;MACAF;MACAC;IACA;IACAE;MACA;MACAH;MACAC;IACA;EACA;EACAG;IAAA;IACA;IACA;MAAA;IAAA;EACA;EACAC;IACAC;MAAA;MACA;QACA;QACA;QACAC,OACAC,8BACAC;UACA;UACA;QACA,GACAC;UACA;UACA;QACA;MACA;IACA;IAEAC;MACA;QACA;MACA;IACA;IAEAC;MACA;QACA;MACA;MACA;IACA;IAEAJ;MAAA;MACA;QACA;UACA;QACA;QACA;QACA;UACA;YACAK;UACA;YACA;cAAA;YAAA;YACA;cAAA;YAAA;UACA;QACA;UACAN,OACAC,gCACAC;YACA;YACAI;UACA,GACAH;YAAA;UAAA;QACA;MACA;IACA;IAEAI;MAAA;MAAA;MACA;QACAC;UACAC;UACAC;QACA;MACA;MACA,kEACAR;QACA;UACAM;QACA;QACA;QACAR;MACA,GACAG;QACA;UACAK;QACA;QACAA;UACAG;UACAD;QACA;QACAE;QACA;UACAC;QACA;MACA;IACA;IAEAC;MACA;MACA;MACA;MACA;MACA;QACAD;MACA;IACA;IAEAE;MACA;MACA;MACA;MACAH;MACA;QACAC;MACA;IACA;EACA;EACAG;AACA;AAAA,4B","file":"cmpts/public/poster/wxa-plugin-canvas/poster/index.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=5aa5bf0e&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"cmpts/public/poster/wxa-plugin-canvas/poster/index.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=template&id=5aa5bf0e&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"","<template>\n    <view>\n        <view @tap=\"onCreate\">\n            <slot />\n        </view>\n        <we-canvas id=\"poster\" @success=\"onCreateSuccess($event, { tagId: 'poster' })\" @fail=\"onCreateFail($event, { tagId: 'poster' })\" />\n    </view>\n</template>\n\n<script>\nimport weCanvas from '../index/index';\nexport default {\n    components: {\n        weCanvas\n    },\n    data() {\n        return {};\n    },\n    props: {\n        config: {\n            type: Object,\n            default: () => ({})\n        },\n        preload: {\n            // 是否预下载图片资源\n            type: Boolean,\n            default: false\n        },\n        hideLoading: {\n            // 是否隐藏loading\n            type: Boolean,\n            default: false\n        }\n    },\n    mounted() {\n        // 处理小程序 ready 生命周期\n        this.$nextTick(() => this.ready());\n    },\n    methods: {\n        ready() {\n            if (this.preload) {\n                const poster = this.zpSelectComponent('#poster');\n                this.downloadStatus = 'doing';\n                poster\n                    .downloadResource(this.config)\n                    .then(() => {\n                        this.downloadStatus = 'success';\n                        this.trigger('downloadSuccess');\n                    })\n                    .catch((e) => {\n                        this.downloadStatus = 'fail';\n                        this.trigger('downloadFail', e);\n                    });\n            }\n        },\n\n        trigger(event, data) {\n            if (this.listener && typeof this.listener[event] === 'function') {\n                this.listener[event](data);\n            }\n        },\n\n        once(event, fun) {\n            if (typeof this.listener === 'undefined') {\n                this.listener = {};\n            }\n            this.listener[event] = fun;\n        },\n\n        downloadResource(reset) {\n            return new Promise((resolve, reject) => {\n                if (reset) {\n                    this.downloadStatus = null;\n                }\n                const poster = this.zpSelectComponent('#poster');\n                if (this.downloadStatus && this.downloadStatus !== 'fail') {\n                    if (this.downloadStatus === 'success') {\n                        resolve();\n                    } else {\n                        this.once('downloadSuccess', () => resolve());\n                        this.once('downloadFail', (e) => reject(e));\n                    }\n                } else {\n                    poster\n                        .downloadResource(this.config)\n                        .then(() => {\n                            this.downloadStatus = 'success';\n                            resolve();\n                        })\n                        .catch((e) => reject(e));\n                }\n            });\n        },\n\n        onCreate(reset = false) {\n            if (!this.hideLoading) {\n                uni.showLoading({\n                    mask: true,\n                    title: '生成中'\n                });\n            }\n            return this.downloadResource(typeof reset === 'boolean' && reset)\n                .then(() => {\n                    if (!this.hideLoading) {\n                        uni.hideLoading();\n                    }\n                    const poster = this.zpSelectComponent('#poster');\n                    poster.create(this.config);\n                })\n                .catch((err) => {\n                    if (!this.hideLoading) {\n                        uni.hideLoading();\n                    }\n                    uni.showToast({\n                        icon: 'none',\n                        title: err.errMsg || '生成失败'\n                    });\n                    console.error(err);\n                    this.$emit('fail', {\n                        detail: err\n                    });\n                });\n        },\n\n        onCreateSuccess(e, _dataset) {\n            /* ---处理dataset begin--- */\n            this.handleDataset(e, _dataset);\n            /* ---处理dataset end--- */\n            const { detail } = e;\n            this.$emit('success', {\n                detail: detail\n            });\n        },\n\n        onCreateFail(err, _dataset) {\n            /* ---处理dataset begin--- */\n            this.handleDataset(err, _dataset);\n            /* ---处理dataset end--- */\n            console.error(err);\n            this.$emit('fail', {\n                detail: err\n            });\n        }\n    },\n    created: function () {}\n};\n</script>\n<style></style>\n"],"sourceRoot":""}
<wxs src="../../../../tpls/wxs/tools.wxs" module="tools"></wxs>
<wxs module="utils">
// 比较操作日期所在月是否当前显示的月
function compareYearMonth(oneDoDay, year, month) {
	var arr = oneDoDay.split('-');
	return arr[0] == year && arr[1] == month;
}

module.exports = {
	compareYearMonth: compareYearMonth,
};
</wxs>
<view class="cal-container"><view class="cal-main"><view class="text-center cal-nav"><view data-event-opts="{{[['tap',[['bindToNowTap',['$event']]]]]}}" class="to-now" bindtap="__e">本月</view><view class="select-item"><view data-event-opts="{{[['tap',[['bindLastTap',['$event']]]]]}}" class="arrow" bindtap="__e"><text class="icon-back"></text></view><view class="text-lg">{{year+"年"+month+"月"}}</view><view data-event-opts="{{[['tap',[['bindNextTap',['$event']]]]]}}" class="arrow" bindtap="__e"><text class="icon-right"></text></view></view><block wx:if="{{mode=='one'}}"><block><block wx:if="{{!fold}}"><view data-event-opts="{{[['tap',[['bindFoldTap',['$event']]]]]}}" class="fold" bindtap="__e"><text class="icon-fold"></text></view></block><block wx:if="{{fold}}"><view data-event-opts="{{[['tap',[['bindFoldTap',['$event']]]]]}}" class="fold" bindtap="__e"><text class="icon-unfold"></text></view></block></block></block></view><view class="cal-title"><view class="cal-title-view">一</view><view class="cal-title-view">二</view><view class="cal-title-view">三</view><view class="cal-title-view">四</view><view class="cal-title-view">五</view><view class="cal-title-view text-orange">六</view><view class="cal-title-view text-red">日</view></view><view class="{{['cal-center '+(!fold?'cur':'')+' ']}}"><block wx:for="{{dayArr}}" wx:for-item="item" wx:for-index="index" wx:key="index"><block wx:if="{{mode=='one'&&(weekNo>0&&item.weekNo==weekNo&&utils.compareYearMonth(oneDoDay,year,month)||item.weekNo==1&&!utils.compareYearMonth(oneDoDay,year,month)||!fold)}}"><view class="{{['cube '+(isLunar?'lunar':'')+' ']}}" data-fullday="{{item.full}}" data-event-opts="{{[['tap',[['bindDayOneTap',['$event']]]]]}}" bindtap="__e"><view class="{{['num-grid  '+(fullToday==item.full?'now-day-cur':'')+'  '+(oneDoDay==item.full?'calendar-bg text-white shadow ':'')+' ']}}"><view class="{{['num  '+(!item.curMonth?'text-no-month':'')]}}"><block wx:if="{{tools.includes(hasDays,item.full)}}"><text class="dd data-has">{{item.show}}</text></block><block wx:else><text class="dd">{{item.show}}</text></block><block wx:if="{{isLunar}}"><text class="{{['lunar '+(oneDoDay==item.full?'text-white':'')+' '+(item.holiday?'text-red':'')]}}">{{item.lunar}}</text></block></view></view></view></block></block><block wx:for="{{dayArr}}" wx:for-item="item" wx:for-index="index" wx:key="index"><block wx:if="{{mode=='multi'}}"><view class="{{['cube '+(isLunar?'lunar':'')]}}" data-fullday="{{item.full}}" data-event-opts="{{[['tap',[['bindDayMultiTap',['$event']]]]]}}" bindtap="__e"><view class="{{['num-grid  '+(fullToday==item.full?'now-day-cur':'')+'  '+(tools.includes(multiDoDay,item.full)?'calendar-bg text-white data-checked':'')+' ']}}"><view class="{{['num  '+(!item.curMonth?'text-no-month':'')+' ']}}"><block wx:if="{{tools.includes(hasDays,item.full)}}"><text class="dd data-has">{{item.show}}</text></block><block wx:else><text class="dd">{{item.show}}</text></block><block wx:if="{{isLunar}}"><text class="{{['lunar '+(tools.includes(multiDoDay,item.full)?'text-white':'')+' '+(item.holiday?'text-red':'')]}}">{{''+item.lunar+''}}</text></block></view></view></view></block></block></view></view></view>
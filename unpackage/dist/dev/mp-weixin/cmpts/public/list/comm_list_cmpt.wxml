<view><block wx:if="{{isTotalMenu}}"><view class="top_bar bar search fixed flex-direction" style="{{(!showSearch?'min-height:80rpx':'')}}"><block wx:if="{{showSearch}}"><view class="bar search bg-white" style="width:100%;"><block wx:if="{{doDate}}"><view class="search-date"><view class="date-group"><picker bindinput="__e" class="search-date-picker" mode="date" value="{{startDateClone}}" data-event-opts="{{[['input',[['__set_model',['','startDateClone','$event',[]]]]]]}}"><view class="picker"><text class="{{[!startDateClone?'text-line1':'text-line2']}}">{{startDateClone||'开始日期'}}</text></view></picker><text class="text-line1">~</text><picker bindinput="__e" mode="date" value="{{endDateClone}}" data-event-opts="{{[['input',[['__set_model',['','endDateClone','$event',[]]]]]]}}"><view class="picker"><text class="{{[!endDateClone?'text-line1':'text-line2']}}">{{endDateClone||'结束日期'}}</text></view></picker></view><view data-event-opts="{{[['tap',[['bindDateSearchTap',['$event']]]]]}}" class="date-btn btn mid bg-gray margin-left-xs" style="width:130rpx;" bindtap="__e">搜索</view><view data-event-opts="{{[['tap',[['bindDateClearTap',['$event']]]]]}}" class="date-btn btn mid bg-grey light margin-left-xs" style="width:130rpx;" bindtap="__e">清空</view></view></block><block wx:else><block wx:if="{{doMonth}}"><view class="search-date"><view class="date-group"><picker bindinput="__e" class="search-date-picker" mode="date" fields="month" value="{{startDateClone}}" data-event-opts="{{[['input',[['__set_model',['','startDateClone','$event',[]]]]]]}}"><view class="picker"><text class="{{[!startDateClone?'text-line1':'text-line2']}}">{{startDateClone||'开始月份'}}</text></view></picker><text class="text-line1">~</text><picker bindinput="__e" mode="date" fields="month" value="{{endDateClone}}" data-event-opts="{{[['input',[['__set_model',['','endDateClone','$event',[]]]]]]}}"><view class="picker"><text class="{{[!endDateClone?'text-line1':'text-line2']}}">{{endDateClone||'结束月份'}}</text></view></picker></view><view data-event-opts="{{[['tap',[['bindDateSearchTap',['$event']]]]]}}" class="date-btn btn mid bg-gray margin-left-xs" style="width:130rpx;" bindtap="__e">搜索</view><view data-event-opts="{{[['tap',[['bindDateClearTap',['$event']]]]]}}" class="date-btn btn mid bg-grey light margin-left-xs" style="width:130rpx;" bindtap="__e">清空</view></view></block></block><slot name="searchStart"></slot><block wx:if="{{!doDate&&!doMonth}}"><view class="search-form round"><text class="icon-search text-l text-grey"></text><input type="text" maxlength="30" placeholder="{{placeholder}}" disabled="{{true}}" data-event-opts="{{[['tap',[['bindSearchTap',['$event']]]]]}}" value="{{searchClone}}" bindtap="__e"/><block wx:if="{{searchClone}}"><view data-event-opts="{{[['tap',[['bindSearchClearTap',['$event']]]]]}}" class="text-xl" bindtap="__e"><text class="icon-roundclose text-right text-gray"></text></view></block></view></block><slot name="searchEnd"></slot></view></block><block wx:if="{{$root.g0}}"><view class="tabs bg-white" style="width:100%;padding:0 20rpx;"><block wx:for="{{sortItems}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="{{['tab '+(sortIndex==index?'text-orange cur  ':'')+' ']}}" data-index="{{index}}" data-event-opts="{{[['tap',[['bindSortTap',['$event']]]]]}}" bindtap="__e"><text class="pulldown-text">{{index==sortIndex&&item.items[sortItemIndex]?item.items[sortItemIndex].label:item.items[0].label}}</text><text class="{{['icon-'+(item.show?'fold':'unfold')+' large text-black']}}"></text></view></block><scroll-view style="white-space:nowrap;width:100%;overflow:scroll;" scroll-left="0" scroll-x="{{true}}"><block wx:for="{{sortMenus}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="{{['list-scroll-view tab tab-menu '+(sortIndex==index+5||sortMenusDefaultIndexClone==index&&!searchClone&&sortIndex==-1?'text-orange cur ':'')+'  ']}}" data-index="{{index+5}}" data-event-opts="{{[['tap',[['bindSortTap',['$event']]]]]}}" bindtap="__e">{{''+item.label+''}}</view></block></scroll-view><slot name="menuEnd"></slot><block wx:for="{{sortItems}}" wx:for-item="item" wx:for-index="index" wx:key="index"><block wx:if="{{pulldownType[index]=='list'}}"><block><block wx:if="{{item.show}}"><view data-event-opts="{{[['touchmove',[['move',['$event']]]],['tap',[['bindSortItemTap',['$event']]]]]}}" class="sort" catchtouchmove="__e" bindtap="__e"><scroll-view class="pulldown-scroll-view" scroll-y="{{true}}" scroll-into-view="{{'pulldown-'+sortIndex+'-'+(sortItemIndex-9)}}"><block wx:for="{{item.items}}" wx:for-item="its" wx:for-index="idx" wx:key="idx"><view class="{{['sort-item  '+(idx==sortItemIndex&&index==sortIndex?'text-orange cur':'')+'  ']}}" id="{{'pulldown-'+index+'-'+idx}}" data-idx="{{idx}}"><block wx:if="{{idx==0}}"><text>全部</text></block>{{''+its.label+''}}</view></block></scroll-view></view></block></block></block></block></view></block></view></block><block wx:if="{{!isTotalMenu}}"><view class="box-list" style="{{('height:'+(listHeight?listHeight:'(100vh)')+';margin-top:0rpx;')}}"><scroll-view class="box-list-scroll" refresher-enabled="{{true}}" refresher-triggered="{{refresherTriggered}}" scroll-y="{{true}}" scroll-top="{{topNum}}" data-event-opts="{{[['refresherrefresh',[['bindPullDownRefresh',['$event']]]],['scrolltolower',[['bindReachBottom',['$event']]]],['scroll',[['bindScrollTop',['$event']]]]]}}" bindrefresherrefresh="__e" bindscrolltolower="__e" bindscroll="__e"><slot></slot></scroll-view></view></block><block wx:if="{{isTotalMenu&&showSearch}}"><view class="box-list" style="{{('height:calc(100vh - '+($root.g1?'110':'190')+'rpx);margin-top:'+($root.g2?'110':'190')+'rpx')}}"><scroll-view class="box-list-scroll" refresher-enabled="{{true}}" refresher-triggered="{{refresherTriggered}}" scroll-y="{{true}}" scroll-top="{{topNum}}" data-event-opts="{{[['refresherrefresh',[['bindPullDownRefresh',['$event']]]],['scrolltolower',[['bindReachBottom',['$event']]]],['scroll',[['bindScrollTop',['$event']]]]]}}" bindrefresherrefresh="__e" bindscrolltolower="__e" bindscroll="__e"><slot></slot></scroll-view></view></block><block wx:if="{{isTotalMenu&&!showSearch}}"><view class="box-list" style="{{('height:calc(100vh - '+($root.g3?'50':'80')+'rpx);margin-top:'+($root.g4?'50':'80')+'rpx')}}"><scroll-view class="box-list-scroll" refresher-enabled="{{true}}" refresher-triggered="{{refresherTriggered}}" scroll-y="{{true}}" scroll-top="{{topNum}}" data-event-opts="{{[['refresherrefresh',[['bindPullDownRefresh',['$event']]]],['scrolltolower',[['bindReachBottom',['$event']]]],['scroll',[['bindScrollTop',['$event']]]]]}}" bindrefresherrefresh="__e" bindscrolltolower="__e" bindscroll="__e"><slot></slot></scroll-view></view></block><block wx:if="{{topShow}}"><button data-event-opts="{{[['tap',[['bindTopTap',['$event']]]]]}}" class="btn-fixed bg-gray text-gray btn-top" style="{{('bottom:'+topBottom+'rpx;margin-bottom: constant(safe-area-inset-bottom);margin-bottom: env(safe-area-inset-bottom);')}}" bindtap="__e"><text class="icon-top"></text></button></block><block wx:for="{{sortItems}}" wx:for-item="item" wx:for-index="index" wx:key="index"><block wx:if="{{pulldownType[index]=='modal'}}"><block><block wx:if="{{item.show}}"><view class="modal bottom-modal show"><view class="dialog"><view class="bar bg-white"><view class="action text-blue" data-index="{{index}}" data-event-opts="{{[['tap',[['bindSortTap',['$event']]]]]}}" bindtap="__e">取消</view><view class="action text-green" style="font-size:30rpx;" data-index="{{index}}" data-event-opts="{{[['tap',[['bindSortTap',['$event']]]]]}}" bindtap="__e">确定</view></view><view class="grid col-3 padding-sm" style="margin-bottom:120rpx;"><block wx:for="{{item.items}}" wx:for-item="its" wx:for-index="idx" wx:key="idx"><view class="padding-xs"><button class="{{['pulldown-btn btn lg block '+(idx==sortItemIndex&&index==sortIndex?'bg-orange light border-orange':'')]}}" data-idx="{{idx}}" data-value="{{item.value}}" data-event-opts="{{[['tap',[['bindSortItemTap',['$event']]]]]}}" bindtap="__e"><block wx:if="{{idx==0}}"><text>全部</text></block>{{''+its.label+''}}</button></view></block></view></view></view></block></block></block></block><block wx:if="{{pulldownMaskShow}}"><view class="pulldown-mask"></view></block></view>
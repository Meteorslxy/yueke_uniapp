<view><cmpt-comm-list vue-id="16033eca-1" source="{{oprt}}" id="cmpt-comm-list" type="{{oprt+'-meet-join-list'}}" search="{{search||''}}" _params="{{_params}}" _menus="{{sortMenus}}" _items="{{sortItems}}" route="{{oprt+'/meet_join_list'}}" topBottom="50" placeholder="搜索姓名，手机等" sortMenusDefaultIndex="0" data-event-opts="{{[['^list',[['bindCommListCmpt']]]]}}" bind:list="__e" bind:__l="__l" vue-slots="{{['default','searchEnd']}}"><view slot="searchEnd"><button data-event-opts="{{[['tap',[['bindCancelAllTap',['$event']]]]]}}" class="btn mid radius bg-orange margin-right-xs" bindtap="__e">取消所有</button></view><view class="join-list"><view class="time-line text-grey">{{"("+time+")"}}</view><block wx:if="{{dataList&&dataList.total}}"><view class="load text-grey">{{'共有'+dataList.total+'条符合条件记录'}}<block wx:if="{{isAllFold}}"><text data-event-opts="{{[['tap',[['bindUnFoldAllTap',['$event']]]]]}}" class="margin-left-xs icon-unfold text-blue" bindtap="__e">全部展开</text></block><block wx:else><text data-event-opts="{{[['tap',[['bindFoldAllTap',['$event']]]]]}}" class="margin-left-xs icon-fold text-blue" bindtap="__e">全部收起</text></block></view></block><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="item"><view class="header"><view class="left"><text class="icon-calendar margin-right-xxs"></text><text>{{item.$orig.JOIN_MEET_DAY+" ("+item.$orig.JOIN_MEET_TIME_START+"～"+item.$orig.JOIN_MEET_TIME_END+")"}}</text></view><view class="right" data-idx="{{index}}" data-event-opts="{{[['tap',[['bindCopyTap',['$event']]]]]}}" bindtap="__e"><text class="icon-copy margin-right-xxs"></text>复制资料</view></view><view class="info"><view class="info-item"><view class="title text-blue">状态</view><view class="mao">：</view><view class="content"><block wx:if="{{item.$orig.JOIN_STATUS==1}}"><view class="text-black"><text class="icon-roundcheck margin-right-xxs"></text>预约成功<block wx:if="{{item.$orig.JOIN_IS_CHECKIN==1}}"><text>，已核销</text></block><block wx:else><text class="text-grey">，未核销</text></block></view></block><block wx:else><block wx:if="{{item.$orig.JOIN_STATUS==10}}"><view>用户取消</view></block><block wx:else><block wx:if="{{item.$orig.JOIN_STATUS==99}}"><view>系统取消</view></block></block></block></view></view><block wx:if="{{item.$orig.JOIN_STATUS==99}}"><view class="info-item"><view class="title text-blue">取消原因</view><view class="mao">：</view><view class="content">{{item.$orig.JOIN_REASON||'未填'}}</view></view></block><block wx:if="{{item.$orig.JOIN_STATUS==8}}"><view class="info-item"><view class="title text-orange">未通过原因</view><view class="mao">：</view><view class="content">{{item.$orig.JOIN_REASON||'未填'}}</view></view></block><block wx:for="{{item.$orig.JOIN_FORMS}}" wx:for-item="form" wx:for-index="formindex" wx:key="formindex"><block wx:if="{{formindex<3||!item.$orig.fold}}"><view class="info-item"><view class="title">{{form.title}}</view><view class="mao">：</view><block wx:if="{{form.type=='mobile'}}"><view class="content" data-type="phone" data-url="{{form.val}}" data-event-opts="{{[['tap',[['url',['$event']]]]]}}" bindtap="__e"><block wx:for="{{form.valArr}}" wx:for-item="valItem" wx:for-index="index" wx:key="index"><text class="{{[valItem===search?'text-red text-bold':'']}}">{{valItem}}</text></block><text class="margin-left-xs icon-phone text-black text-normal"></text></view></block><block wx:else><view class="content" data-type="copy" data-url="{{form.title+'：'+form.val}}" data-event-opts="{{[['tap',[['url',['$event']]]]]}}" bindtap="__e"><block wx:for="{{form.valArr}}" wx:for-item="valItem" wx:for-index="index" wx:key="index"><text class="{{[valItem===search?'text-red text-bold':'']}}">{{valItem}}</text></block></view></block></view></block></block><block wx:if="{{item.g0}}"><view class="fold" data-idx="{{index}}" data-event-opts="{{[['tap',[['bindUnFoldTap',['$event']]]]]}}" bindtap="__e"><text class="icon-unfold margin-right-xs"></text>更多资料...</view></block><block wx:if="{{item.g1}}"><view class="fold" data-idx="{{index}}" data-event-opts="{{[['tap',[['bindFoldTap',['$event']]]]]}}" bindtap="__e"><text class="icon-fold margin-right-xs"></text>收起</view></block><view class="info-item add-time"><view class="title text-grey">提交</view><view class="mao text-grey">：</view><view class="content text-grey">{{item.$orig.JOIN_ADD_TIME}}</view></view><block wx:if="{{item.$orig.JOIN_IS_CHECKIN==1}}"><view class="info-item"><view class="title text-grey" style="font-weight:normal;">核销</view><view class="mao text-grey" style="font-weight:normal;">：</view><view class="content text-grey" style="font-weight:normal;">{{item.$orig.JOIN_CHECKIN_TIME}}</view></view></block><view class="oprt"><block wx:if="{{item.$orig.JOIN_STATUS==1}}"><block><block wx:if="{{item.$orig.JOIN_IS_CHECKIN==0}}"><view class="btn bg-purple margin-right-s light" data-idx="{{index}}" data-flag="1" data-event-opts="{{[['tap',[['bindCheckinTap',['$event']]]]]}}" bindtap="__e">核销预约</view></block><block wx:else><view class="btn bg-grey light margin-right-s" data-idx="{{index}}" data-flag="0" data-event-opts="{{[['tap',[['bindCheckinTap',['$event']]]]]}}" bindtap="__e">取消核销</view></block></block></block><block wx:if="{{item.$orig.JOIN_STATUS==1}}"><block><view class="btn bg-grey light margin-right-s" data-idx="{{index}}" data-status="99" data-old="{{item.$orig.JOIN_STATUS}}" data-event-opts="{{[['tap',[['bindCancelTap',['$event']]]]]}}" bindtap="__e">取消预约</view></block></block><block wx:if="{{item.$orig.JOIN_STATUS==10||item.$orig.JOIN_STATUS==99}}"><block><view class="btn bg-olive light margin-right-s" data-idx="{{index}}" data-status="1" data-old="{{item.$orig.JOIN_STATUS}}" data-event-opts="{{[['tap',[['bindStatusTap',['$event']]]]]}}" bindtap="__e">恢复预约</view></block></block><view class="btn bg-orange light margin-right-s" data-idx="{{index}}" data-event-opts="{{[['tap',[['bindDelTap',['$event']]]]]}}" bindtap="__e">删除</view></view></view><view class="no">{{index+1}}</view></view></block></view><list-load-tpl vue-id="{{('16033eca-2')+','+('16033eca-1')}}" compName="listLoadTpl" data="{{({dataList,skin:'text-grey',noHint:'暂无记录'})}}" bind:__l="__l"></list-load-tpl></cmpt-comm-list><block wx:if="{{cancelAllModalShow}}"><cmpt-modal class="modal-form" vue-id="16033eca-3" show="{{cancelAllModalShow}}" type="dialog" title="取消所有预约" cancelText="返回" confirmText="确定取消" data-event-opts="{{[['^updateShow',[['__set_sync',['$0','cancelAllModalShow','$event'],['']]]],['^click',[['bindCancelAllCmpt']]]]}}" bind:updateShow="__e" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="form-group" style="padding:0 10rpx;"><view class="title">取消理由<text class="text-grey text-mid">(选填)</text>：</view><view data-event-opts="{{[['tap',[['bindClearReasonTap',['$event']]]]]}}" class="text-grey" style="width:150rpx;text-align:right;" bindtap="__e"><text class="icon-roundclose"></text>清空</view></view><view class="form-group cancel-area"><textarea style="height:110rpx;" placeholder-class="phc" placeholder="请输入取消理由 (非必填)" maxlength="100" data-event-opts="{{[['input',[['__set_model',['','formReason','$event',[]]]]]]}}" value="{{formReason}}" bindinput="__e"></textarea></view></cmpt-modal></block><block wx:if="{{cancelModalShow}}"><cmpt-modal class="modal-form" vue-id="16033eca-4" show="{{cancelModalShow}}" type="dialog" title="取消预约" cancelText="返回" confirmText="确定取消" data-event-opts="{{[['^updateShow',[['__set_sync',['$0','cancelModalShow','$event'],['']]]],['^click',[['bindCancelCmpt']]]]}}" bind:updateShow="__e" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="form-group" style="padding:0 10rpx;"><view class="title">取消理由<text class="text-grey text-mid">(选填)</text>：</view><view data-event-opts="{{[['tap',[['bindClearReasonTap',['$event']]]]]}}" class="text-grey" style="width:150rpx;text-align:right;" bindtap="__e"><text class="icon-roundclose"></text>清空</view></view><view class="form-group cancel-area"><textarea style="height:110rpx;" placeholder-class="phc" placeholder="请输入取消理由 (非必填)" maxlength="100" data-event-opts="{{[['input',[['__set_model',['','formReason','$event',[]]]]]]}}" value="{{formReason}}" bindinput="__e"></textarea></view></cmpt-modal></block><block wx:if="{{refuseModalShow}}"><cmpt-modal class="modal-form" vue-id="16033eca-5" show="{{refuseModalShow}}" type="dialog" title="审核不通过" cancelText="返回" confirmText="确定" data-event-opts="{{[['^updateShow',[['__set_sync',['$0','refuseModalShow','$event'],['']]]],['^click',[['bindRefuseCmpt']]]]}}" bind:updateShow="__e" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="form-group" style="padding:0 10rpx;"><view class="title">不通过理由<text class="text-grey text-mid">(选填)</text>：</view><view data-event-opts="{{[['tap',[['bindClearReasonTap',['$event']]]]]}}" class="text-grey" style="width:150rpx;text-align:right;" bindtap="__e"><text class="icon-roundclose"></text>清空</view></view><view class="form-group cancel-area"><textarea style="height:110rpx;" placeholder-class="phc" placeholder="请输入审核不通过理由 (非必填)，将通知给用户" maxlength="100" data-event-opts="{{[['input',[['__set_model',['','formReason','$event',[]]]]]]}}" value="{{formReason}}" bindinput="__e"></textarea></view></cmpt-modal></block></view>
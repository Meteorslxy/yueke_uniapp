<view><view class="{{['main-'+oprt]}}"><view class="select-date"><cmpt-calendar vue-id="0db27eda-1" mode="multi" hasDays="{{hasDays}}" hasJoinDays="{{hasJoinDays}}" multiDoDay="{{multiDoDay}}" fold="{{false}}" selectTimeout="{{false}}" data-event-opts="{{[['^click',[['bindDataCalendarClickCmpt']]]]}}" bind:click="__e" bind:__l="__l"></cmpt-calendar></view><block wx:if="{{$root.g0}}"><view class="data-hint"><text>时段设置<text class="text-grey text-day">{{"(共"+($root.g1+$root.g2)+"天可约)"}}</text></text></view></block><block wx:else><view class="data-hint"><text>时段设置：<text class="text-orange text-day">请先选择以上日期</text></text></view></block><view class="form-area"><block wx:for="{{$root.l1}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="form-box"><view class="time-group"><view class="time-title"><text>{{item.$orig.dayDesc}}</text><text class="icon-moreandroid" data-idx="{{index}}" data-event-opts="{{[['tap',[['bindDaySetTap',['$event']]]]]}}" bindtap="__e"></text></view><block wx:if="{{item.g3==0}}"><view class="time-line text-orange time-line-hint" data-idx="{{index}}" data-event-opts="{{[['tap',[['bindTimeAddTap',['$event']]]]]}}" bindtap="__e"><text class="icon-info margin-right-xs"></text>尚未添加时段，请设置</view></block><block wx:for="{{item.l0}}" wx:for-item="timesItem" wx:for-index="timesIndex" wx:key="timesIndex"><view class="time-line"><block wx:if="{{timesItem.$orig.stat.succCnt}}"><text class="x-lock icon-profilefill text-grey margin-right-xs"></text></block><cmpt-picker vue-id="{{'0db27eda-2-'+index+'-'+timesIndex}}" disabled="{{timesItem.$orig.stat.succCnt}}" disabledHint="该时段已有用户预约，处于锁定状态，不可更改起止时间点（上限人数可更改）" steps="2" isSlot="{{true}}" sourceData="{{daysTimeOptions}}" itemMulti="{{[timesItem.g4[0],timesItem.g5[1]]}}" data-idx="{{index}}" data-timesidx="{{timesIndex}}" data-event-opts="{{[['^select',[['bindDaysTimeStartCmpt']]]]}}" bind:select="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="clock box">{{''+timesItem.$orig.start+''}}<text class="icon-right text-arrow"></text></view></cmpt-picker><view class="clock-line">～</view><cmpt-picker vue-id="{{'0db27eda-3-'+index+'-'+timesIndex}}" disabled="{{timesItem.$orig.stat.succCnt}}" disabledHint="该时段已有用户预约，处于锁定状态，不可更改起止时间点（上限人数可更改）" steps="2" isSlot="{{true}}" sourceData="{{daysTimeOptions}}" itemMulti="{{[timesItem.g6[0],timesItem.g7[1]]}}" data-idx="{{index}}" data-timesidx="{{timesIndex}}" data-event-opts="{{[['^select',[['bindDaysTimeEndCmpt']]]]}}" bind:select="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="clock box">{{''+timesItem.$orig.end+''}}<text class="icon-right text-arrow"></text></view></cmpt-picker><view class="limit box" data-idx="{{index}}" data-timesidx="{{timesIndex}}" data-event-opts="{{[['tap',[['bindShowTimeLimitModalTap',['$event']]]]]}}" bindtap="__e">{{''+(!timesItem.$orig.isLimit?'不限人数':timesItem.$orig.limit+'人')+''}}<text class="icon-right"></text></view><view class="box close" data-idx="{{index}}" data-timesidx="{{timesIndex}}" data-mark="{{timesItem.$orig.mark}}" data-event-opts="{{[['tap',[['bindTimeDelTap',['$event']]]]]}}" bindtap="__e"><text class="icon-delete"></text></view><switch class="limit-status green sm" disabled="{{true}}" data-idx="{{index}}" data-timesidx="{{timesIndex}}" checked="{{timesItem.$orig.status==1}}" data-event-opts="{{[['tap',[['bindTimeStatusSwitch',['$event']]]]]}}" bindtap="__e"></switch></view></block><view class="time-oprt"><view class="op" data-idx="{{index}}" data-event-opts="{{[['tap',[['bindTimeAddTap',['$event']]]]]}}" bindtap="__e"><text class="icon-add margin-right-xxs"></text>添加时段</view><view class="vline"></view><view class="op" data-idx="{{index}}" data-timesidx="{{-1}}" data-event-opts="{{[['tap',[['bindShowTimeLimitModalTap',['$event']]]]]}}" bindtap="__e"><text class="icon-friend margin-right-xxs"></text>人数上限</view><view class="vline"></view><view class="op" data-idx="{{index}}" data-event-opts="{{[['tap',[['bindTimeSetTap',['$event']]]]]}}" bindtap="__e"><text class="icon-copy margin-right-xxs"></text>复制/模板</view></view></view></view></block></view></view><view class="{{['btn-bottom-'+oprt]}}"><view class="return" data-type="back" data-event-opts="{{[['tap',[['url',['$event']]]]]}}" bindtap="__e">不保存,返回</view><view data-event-opts="{{[['tap',[['bindSaveTap',['$event']]]]]}}" class="save" bindtap="__e">保存时间设置</view></view><block wx:if="{{curTimeLimitModalShow}}"><cmpt-modal class="modal-form" vue-id="0db27eda-4" show="{{curTimeLimitModalShow}}" type="dialog" title="时段人数上限" data-event-opts="{{[['^updateShow',[['__set_sync',['$0','curTimeLimitModalShow','$event'],['']]]],['^click',[['bindTimeLimitSetCmpt']]]]}}" bind:updateShow="__e" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}"><block wx:if="{{curTimesIdx>-1}}"><view class="modal-desc text-blue">{{''+days[curIdx].day+" "+days[curIdx].times[curTimesIdx].start+"～"+days[curIdx].times[curTimesIdx].end+' 可约人数上限为'}}</view></block><block wx:else><view class="modal-desc">{{days[curIdx].day+" 全天 可约人数上限为"}}</view></block><view class="form-group"><view class="title">是否限制人数</view><block wx:if="{{curTimeIsLimit}}"><switch class="green sm" data-item="curTimeIsLimit" checked="{{true}}" data-event-opts="{{[['change',[['switchModel',['$event']]]]]}}" bindchange="__e"></switch></block><block wx:else><block wx:if="{{!curTimeIsLimit}}"><switch class="green sm" data-item="curTimeIsLimit" data-event-opts="{{[['change',[['switchModel',['$event']]]]]}}" bindchange="__e"></switch></block></block></view><view class="form-group"><view class="title">人数上限</view><block wx:if="{{curTimeIsLimit}}"><block><input class="text-red margin-right-xs" type="number" maxlength="4" placeholder="请输入本时段人数上限" data-event-opts="{{[['input',[['__set_model',['','curTimeLimit','$event',[]]]]]]}}" value="{{curTimeLimit}}" bindinput="__e"/>人</block></block><block wx:else><text>不限制人数</text></block></view></cmpt-modal></block><block wx:if="{{saveTempModalShow}}"><cmpt-modal class="modal-form" vue-id="0db27eda-5" show="{{saveTempModalShow}}" type="dialog" title="保存为模板" subtitle="{{'将当前该日期下的配置的 「'+$root.g8+'项」 时段保存为模板，以便于后续快速调用 :'}}" subtitleAlign="left" data-event-opts="{{[['^updateShow',[['__set_sync',['$0','saveTempModalShow','$event'],['']]]],['^click',[['bindSaveTempCmpt']]]]}}" bind:updateShow="__e" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="form-group"><input class="input-temp" maxlength="20" placeholder="请输入模板名称" data-event-opts="{{[['input',[['__set_model',['','formTempName','$event',[]]]]]]}}" value="{{formTempName}}" bindinput="__e"/></view></cmpt-modal></block><block wx:if="{{topShow}}"><button data-event-opts="{{[['tap',[['bindTopTap',['$event']]]]]}}" class="btn-fixed bg-gray text-gray btn-top" style="bottom:160rpx;" bindtap="__e"><text class="icon-top"></text></button></block><block wx:if="{{cancelModalShow}}"><cmpt-modal class="modal-form" vue-id="0db27eda-6" show="{{cancelModalShow}}" type="dialog" title="取消该时段所有预约" cancelText="返回" confirmText="确定取消" data-event-opts="{{[['^updateShow',[['__set_sync',['$0','cancelModalShow','$event'],['']]]],['^click',[['bindCancelMeetJoinCmpt']]]]}}" bind:updateShow="__e" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="form-group" style="padding:0 10rpx;"><view class="title">取消理由<text class="text-grey text-mid">(选填)</text>：</view><view data-event-opts="{{[['tap',[['bindClearReasonTap',['$event']]]]]}}" class="text-grey" style="width:150rpx;text-align:right;" bindtap="__e"><text class="icon-roundclose"></text>清空</view></view><view class="form-group cancel-area"><textarea style="height:110rpx;" placeholder-class="phc" placeholder="请输入取消理由 (非必填)，将通知给用户" maxlength="100" data-event-opts="{{[['input',[['__set_model',['','formReason','$event',[]]]]]]}}" value="{{formReason}}" bindinput="__e"></textarea></view></cmpt-modal></block></view>